<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Texture Flipbook (NSBTP) Creation - Kingdom of DS Hacking</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../../../index.html">Home</a></li><li class="chapter-item affix "><li class="part-title">Guides</li><li class="chapter-item "><div>Generation IV</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>Diamond and Pearl</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../gen4/guides/field/owsprites.html">Overworld Sprites Replacement</a></li></ol></li><li class="chapter-item "><div>Platinum</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../gen4/guides/field/owsprites.html">Overworld Sprites Replacement</a></li><li class="chapter-item "><a href="../../../gen4/guides/field/pt_hgss-pokemarts.html">Adding New Poké Marts</a></li><li class="chapter-item "><a href="../../../gen4/guides/field/pt_hgss-script_weather.html">Setting the Weather from a Script</a></li><li class="chapter-item "><a href="../../../gen4/guides/field/pt_hgss-reusabletms.html">Making TMs Reusable</a></li></ol></li><li class="chapter-item "><div>Heartgold and SoulSilver</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../gen4/guides/field/owsprites.html">Overworld Sprites Replacement</a></li><li class="chapter-item "><a href="../../../gen4/guides/field/pt_hgss-pokemarts.html">Adding New Poké Marts</a></li><li class="chapter-item "><a href="../../../gen4/guides/interface/hgss-town_map.html">Editing the Town Map</a></li><li class="chapter-item "><a href="../../../gen4/guides/field/pt_hgss-script_weather.html">Setting the Weather from a Script</a></li><li class="chapter-item "><a href="../../../gen4/guides/field/pt_hgss-reusabletms.html">Making TMs Reusable</a></li></ol></li></ol></li><li class="chapter-item "><div>Generation V</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>Black and White</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../gen5/guides/misc/bw_b2w2-code_injection.html">Code Injection</a></li><li class="chapter-item "><a href="../../../gen5/guides/field/bw_b2w2-map_insertion.html">Map Insertion</a></li><li class="chapter-item "><a href="../../../gen5/guides/field/bw_b2w2-buildings.html">Exporting and Importing Buildings</a></li></ol></li><li class="chapter-item "><div>Black 2 and White 2</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../gen5/guides/misc/bw_b2w2-code_injection.html">Code Injection</a></li><li class="chapter-item "><a href="../../../gen5/guides/misc/b2w2-fairy.html">Fairy Type Insertion</a></li><li class="chapter-item "><a href="../../../gen5/guides/field/bw_b2w2-map_insertion.html">Map Insertion</a></li><li class="chapter-item "><a href="../../../gen5/guides/field/bw_b2w2-buildings.html">Exporting and Importing Buildings</a></li></ol></li></ol></li><li class="chapter-item expanded "><div>Universal</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../universal/guides/code_injection/code_injection.html">Code Injection</a></li><li class="chapter-item "><a href="../../../universal/guides/sprite_indexing/indexing.html">Sprite Indexing</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../universal/guides/sprite_indexing/resources/gimp/gimp.html">Sprite Indexing with GIMP</a></li></ol></li><li class="chapter-item "><a href="../../../universal/guides/ncer_sprite_editing/ncer_sprite_editing.html">NCER Sprite Editing</a></li><li class="chapter-item "><a href="../../../universal/guides/hex_editing/hex_editing.html">Hex Editing</a></li><li class="chapter-item expanded "><a href="../../../universal/guides/nsbtp_creation/nsbtp_tutorial.html" class="active">Texture Flipbook (NSBTP) Creation</a></li></ol></li><li class="chapter-item "><li class="part-title">Resources</li><li class="chapter-item "><div>Generation IV</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>Diamond and Pearl</div></li><li class="chapter-item "><div>Platinum</div></li><li class="chapter-item "><div>Heartgold and SoulSilver</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../gen4/resources/interface/hgss-town_map_spots.html">Town Map Structures</a></li></ol></li></ol></li><li class="chapter-item "><div>Generation V</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>Black and White</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../gen5/resources/field/bw_b2w2-maps.html">Maps</a></li><li class="chapter-item "><a href="../../../gen5/resources/field/bw_b2w2-zone_entities.html">Zone Entities</a></li></ol></li><li class="chapter-item "><div>Black 2 and White 2</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../gen5/resources/field/b2w2-area_data.html">Area Data</a></li><li class="chapter-item "><a href="../../../gen5/resources/field/bw_b2w2-maps.html">Maps</a></li><li class="chapter-item "><a href="../../../gen5/resources/field/bw_b2w2-zone_entities.html">Zone Entities</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../../universal/resources/nitro/nitro_overview.html">Nitro</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../universal/resources/nitro/file_system/file_narc.html">Nitro Archive (NARC)</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../universal/resources/nitro/file_system/section_fatb.html">File Allocation Table (FATB)</a></li><li class="chapter-item "><a href="../../../universal/resources/nitro/file_system/section_fntb.html">File Name Table (FNTB)</a></li><li class="chapter-item "><a href="../../../universal/resources/nitro/file_system/section_fimg.html">File Image (FIMG)</a></li></ol></li><li class="chapter-item "><div>G2D</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/file_nanr.html">Nitro Animation Runtime (NANR)</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/section_abnk.html">Animation Bank (ABNK)</a></li><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/section_labl.html">Label (LABL)</a></li><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/section_uext.html">User Extension (UEXT)</a></li></ol></li><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/file_nclr.html">Nitro Color Runtime (NCLR)</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/section_pltt.html">Palette (PLTT)</a></li><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/section_pcmp.html">Palette Count Map (PCMP)</a></li></ol></li><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/file_ncer.html">Nitro Cell Runtime (NCER)</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/section_cebk.html">Cell Bank (CEBK)</a></li><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/section_labl.html">Label (LABL)</a></li><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/section_uext.html">User Extension (UEXT)</a></li></ol></li><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/file_ncgr.html">Nitro Graphics Runtime (NCGR)</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/section_char.html">Character (CHAR)</a></li><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/section_cpos.html">Character Position (CPOS)</a></li></ol></li><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/file_nmar.html">Nitro Multicell Animation Runtime (NMAR)</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/section_abnk.html">Animation Bank (ABNK)</a></li><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/section_labl.html">Label (LABL)</a></li></ol></li><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/file_nmcr.html">Nitro Multicell Runtime (NMCR)</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/section_mcbk.html">Multicell Bank (MCBK)</a></li></ol></li><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/file_nscr.html">Nitro Screen Runtime (NSCR)</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_2d/section_scrn.html">Screen (SCRN)</a></li></ol></li></ol></li><li class="chapter-item "><div>G3D</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_3d/file_bta0.html">Nitro System Binary Texture Animation (NSBTA)</a></li><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_3d/file_bmd0.html">Nitro System Binary Model (NSBMD)</a></li><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_3d/file_btx0.html">Nitro System Binary Texture (NSBTX)</a></li><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_3d/file_btp0.html">Nitro System Binary Texture Pattern (NSBTP)</a></li><li class="chapter-item "><a href="../../../universal/resources/nitro/graphics_3d/file_bca0.html">Nitro System Binary Character Skeleton Animation (NSBCA)</a></li></ol></li><li class="chapter-item "><div>Sound</div></li></ol></li><li class="chapter-item "><li class="part-title">Contributing</li><li class="chapter-item "><a href="../../../contribution_guide.html">Contribution Guide</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Kingdom of DS Hacking</h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="making-a-new-texture-flipbook-animation-from-scratch"><a class="header" href="#making-a-new-texture-flipbook-animation-from-scratch">Making a new texture flipbook animation from scratch</a></h1>
<blockquote>
<p>This guide was written by <a href="https://github.com/BromBromBromley">Brom</a>.</p>
</blockquote>
<h2 id="what-is-a-texture-flipbook"><a class="header" href="#what-is-a-texture-flipbook">What is a texture flipbook?</a></h2>
<p>Ever seen flowers on the field change between different frames in their animation? Have you seen the water rise and fall with rocks in the ocean? Even with the player character, all of these examples use texture flipbook animations! Let's learn how to make one from scratch together.</p>
<h2 id="what-is-an-nsbtp"><a class="header" href="#what-is-an-nsbtp">What is an NSBTP?</a></h2>
<p>For the Nintendo DS, games that are 3D primarily use <a href="https://kingdom-of-ds-hacking.github.io/universal/resources/nitro/graphics_3d/file_btp0.html">NSBTP (NITRO System Binary Texture Pattern animation)</a> files to make texture flipbooks. In tools like Tinke, you may see these files as &quot;.btp0&quot; files, but don't worry, they're the same as NSBTP files.</p>
<h2 id="what-is-an-itp"><a class="header" href="#what-is-an-itp">What is an ITP?</a></h2>
<p>Before the texture flipbook animation is put into a format that the Nintendo DS can read easily with the NSBTP file, it's in a plain-text format that humans can read more easily. These files are called ITP (Intermediate Texture Pattern animation) files. We will be making one of these in order to create an NSBTP of our own. After we give it to a special program, we can get an NSBTP file from it.</p>
<h2 id="what-do-we-need-to-make-one"><a class="header" href="#what-do-we-need-to-make-one">What do we need to make one?</a></h2>
<p>Required materials:</p>
<ul>
<li>Any text editor</li>
<li>G3DCVTR</li>
</ul>
<h2 id="creating-the-itp-file"><a class="header" href="#creating-the-itp-file">Creating the ITP file</a></h2>
<h3 id="what-are-the-parts-of-the-itp-file"><a class="header" href="#what-are-the-parts-of-the-itp-file">What are the parts of the ITP file?</a></h3>
<p>There are two primary parts to the ITP being the &quot;header&quot; section with various info about how the file was generated along with the &quot;body&quot; section which is the more important part. For the most part, the data in the header section isn't very important for our purposes, but will be included in order to make a valid ITP file.</p>
<h3 id="making-the-basic-skeleton-of-the-itp"><a class="header" href="#making-the-basic-skeleton-of-the-itp">Making the basic skeleton of the ITP</a></h3>
<p>For anyone who has seen an XML file before, you might not be in for a total shock as ITP files are actually XML files in disguise! To start, let's put in the data that every ITP needs here:</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;Shift_JIS&quot;?&gt;

&lt;itp version=&quot;1.6.0&quot;&gt;

&lt;head&gt;
    &lt;create user=&quot;name&quot; host=&quot;host&quot; date=&quot;date&quot; source=&quot;source&quot;/&gt;
    &lt;title&gt;Texture Pattern Animation Data for NINTENDO NITRO-System&lt;/title&gt;
    &lt;generator name=&quot;generator&quot; version=&quot;version&quot;/&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;/body&gt;

&lt;/itp&gt;
</code></pre>
<p>With this, we now have a basic header for the ITP. Let's now fill out the body section.</p>
<h3 id="filling-in-the-body-section-of-the-itp"><a class="header" href="#filling-in-the-body-section-of-the-itp">Filling in the &quot;body&quot; section of the ITP</a></h3>
<p>The body is a little bit more complicated. It is split up into 4 parts being:</p>
<ul>
<li>The texture pattern animation's general information (<code>tex_pattern_info</code>)</li>
<li>The texture pattern animation's texture and palette names (<code>tex_pattern_list_data</code>)</li>
<li>The texture pattern animation's data (<code>tex_pattern_data</code>)</li>
<li>The array of texture pattern animations (<code>tex_pattern_anm_array</code>)*</li>
</ul>
<p>*<em>For this guide, we will only be covering having a single pattern animation in the texture pattern animation array</em></p>
<p>First up is the <code>tex_pattern_info</code> section.</p>
<pre><code class="language-xml">&lt;tex_pattern_info
    frame_size=&quot;16&quot;
    tool_start_frame=&quot;1&quot;
    tool_end_frame=&quot;16&quot;
    compress_material=&quot;on&quot; material_size=&quot;1 1&quot;
/&gt;
</code></pre>
<p>Here, we set how many frames our animation should have (<code>frame_size</code>), what frame our animation should start on (<code>tool_start_frame</code>), and what frame our animation should end on (<code>tool_end_frame</code>). For this guide, we won't be touching the <code>compress_material</code> or <code>material_size</code> fields. </p>
<p>With this section here, we have an 16 frame long animation that starts at frame 1 and ends on frame 16.</p>
<p>Next up is the <code>tex_pattern_list_data</code> section.</p>
<pre><code class="language-xml">&lt;tex_pattern_list_data image_size=&quot;4&quot; palette_size=&quot;4&quot;&gt;
    &lt;image_name index=&quot;0&quot; name=&quot;anim.1&quot;/&gt;
    &lt;image_name index=&quot;1&quot; name=&quot;anim.2&quot;/&gt;
    &lt;image_name index=&quot;2&quot; name=&quot;anim.3&quot;/&gt;
    &lt;image_name index=&quot;3&quot; name=&quot;anim.4&quot;/&gt;
    &lt;palette_name index=&quot;0&quot; name=&quot;anim.1_pl&quot;/&gt;
    &lt;palette_name index=&quot;1&quot; name=&quot;anim.2_pl&quot;/&gt;
    &lt;palette_name index=&quot;2&quot; name=&quot;anim.3_pl&quot;/&gt;
    &lt;palette_name index=&quot;3&quot; name=&quot;anim.4_pl&quot;/&gt;
&lt;/tex_pattern_list_data&gt;
</code></pre>
<p>The first half of this section dictates what textures from a model's NSBTX will be used and the second half dictates what palettes will be used. If the amount of textures needs to be increased or decreased, make sure to adjust the <code>image_size</code> field appropriately and same for the amount of palettes with the <code>palette_size</code> field.</p>
<p>After this is the <code>tex_pattern_data</code> section.</p>
<pre><code class="language-xml">&lt;tex_pattern_data&gt;
    &lt;frame_idx size=&quot;8&quot;&gt;
        0 2 4 6 8 10 12 14
    &lt;/frame_idx&gt;
    &lt;image_idx size=&quot;8&quot;&gt;
        0 1 2 3 2 3 1 0
    &lt;/image_idx&gt;
    &lt;palette_idx size=&quot;8&quot;&gt;
        0 1 2 3 2 3 1 0
    &lt;/palette_idx&gt;
&lt;/tex_pattern_data&gt;
</code></pre>
<p>This part right here is the actual animation part. The <code>frame_idx</code> portion determines what frames will change the image and palette shown. The <code>image_idx</code> potion determines what image is shown based on the image index from the <code>tex_pattern_list_data</code> section. Similarly, the <code>palette_idx</code> portion does the same thing but for the palette. In this example, it does the following:</p>
<pre><code class="language-xml">Frame 0 - Shows anim.1 (texture 0) with palette anim.1_pl
Frame 2 - Shows anim.2 (texture 1) with palette anim.2_pl
Frame 4 - Shows anim.3 (texture 2) with palette anim.3_pl
Frame 6 - Shows anim.4 (texture 3) with palette anim.4_pl
Frame 8 - Shows anim.3 (texture 2) with palette anim.3_pl
Frame 10 - Shows anim.4 (texture 3) with palette anim.4_pl
Frame 12 - Shows anim.2 (texture 1) with palette anim.2_pl
Frame 14 - Shows anim.1 (texture 0) with palette anim.1_pl
</code></pre>
<p>Until another key frame is hit, it will keep the currently displayed image and palette. If the amount of key frames needed needs to be increased or decreased, make sure to change the &quot;size&quot; field for <code>frame_idx</code>, <code>image_idx</code>, and <code>palette_idx</code>.</p>
<p>As the last section for the <code>body</code> section, we have <code>tex_pattern_anm_array</code>.</p>
<pre><code class="language-xml">&lt;tex_pattern_anm_array size=&quot;1&quot;&gt;
    &lt;tex_pattern_anm index=&quot;0&quot; material_name=&quot;anim_tex&quot; data_size=&quot;8&quot; data_head=&quot;0&quot;/&gt;
&lt;/tex_pattern_anm_array&gt;
</code></pre>
<p>The main things of importance for us here are the <code>material_name</code> and <code>data_size</code> fields. With the <code>material_name</code> field, we can target a specific material for the animation to play instead of displaying that material. In this case, if we had a material called <code>anim_tex</code> on a model, it would display the animation from here instead. With the <code>data_size</code> field, for our purposes, make sure it matches the <code>size</code> field from the <code>tex_pattern_data</code> section because if it's smaller than it, it won't use all of the key frames listed.</p>
<p>With everything put together from the examples we should get this:</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;Shift_JIS&quot;?&gt;

&lt;itp version=&quot;1.6.0&quot;&gt;

&lt;head&gt;
    &lt;create user=&quot;name&quot; host=&quot;host&quot; date=&quot;date&quot; source=&quot;source&quot;/&gt;
    &lt;title&gt;Texture Pattern Animation Data for NINTENDO NITRO-System&lt;/title&gt;
    &lt;generator name=&quot;generator&quot; version=&quot;version&quot;/&gt;
&lt;/head&gt;

&lt;body&gt;

&lt;tex_pattern_info
    frame_size=&quot;16&quot;
    tool_start_frame=&quot;1&quot;
    tool_end_frame=&quot;16&quot;
    compress_material=&quot;on&quot; material_size=&quot;1 1&quot;
/&gt;

&lt;tex_pattern_list_data image_size=&quot;4&quot; palette_size=&quot;4&quot;&gt;
    &lt;image_name index=&quot;0&quot; name=&quot;anim.1&quot;/&gt;
    &lt;image_name index=&quot;1&quot; name=&quot;anim.2&quot;/&gt;
    &lt;image_name index=&quot;2&quot; name=&quot;anim.3&quot;/&gt;
    &lt;image_name index=&quot;3&quot; name=&quot;anim.4&quot;/&gt;
    &lt;palette_name index=&quot;0&quot; name=&quot;anim.1_pl&quot;/&gt;
    &lt;palette_name index=&quot;1&quot; name=&quot;anim.2_pl&quot;/&gt;
    &lt;palette_name index=&quot;2&quot; name=&quot;anim.3_pl&quot;/&gt;
    &lt;palette_name index=&quot;3&quot; name=&quot;anim.4_pl&quot;/&gt;
&lt;/tex_pattern_list_data&gt;

&lt;tex_pattern_data&gt;
    &lt;frame_idx size=&quot;8&quot;&gt;
        0 2 4 6 8 10 12 14
    &lt;/frame_idx&gt;
    &lt;image_idx size=&quot;8&quot;&gt;
        0 1 2 3 2 3 1 0
    &lt;/image_idx&gt;
    &lt;palette_idx size=&quot;8&quot;&gt;
        0 1 2 3 2 3 1 0
    &lt;/palette_idx&gt;
&lt;/tex_pattern_data&gt;

&lt;tex_pattern_anm_array size=&quot;1&quot;&gt;
    &lt;tex_pattern_anm index=&quot;0&quot; material_name=&quot;anim_tex&quot; data_size=&quot;8&quot; data_head=&quot;0&quot;/&gt;
&lt;/tex_pattern_anm_array&gt;

&lt;/body&gt;

&lt;/itp&gt;
</code></pre>
<p>With this, it should play a short animation on the material <code>anim_tex</code> assuming all the textures and palettes listed are within the texture set of the model.</p>
<h2 id="getting-an-nsbtp-from-our-itp"><a class="header" href="#getting-an-nsbtp-from-our-itp">Getting an NSBTP from our ITP</a></h2>
<p>After you finish making your ITP, all you have to do is drag and drop your ITP file onto <code>g3dcvtr.exe</code> and assuming there are no errors, it should convert your ITP into a new NSBTP file.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../universal/guides/hex_editing/hex_editing.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../../gen4/resources/interface/hgss-town_map_spots.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../universal/guides/hex_editing/hex_editing.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../../gen4/resources/interface/hgss-town_map_spots.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../elasticlunr.min.js"></script>
        <script src="../../../mark.min.js"></script>
        <script src="../../../searcher.js"></script>

        <script src="../../../clipboard.min.js"></script>
        <script src="../../../highlight.js"></script>
        <script src="../../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../../mermaid.min.js"></script>
        <script src="../../../mermaid-init.js"></script>


    </div>
    </body>
</html>
